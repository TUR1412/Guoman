# 变更提案: Diagnostics Records Explorer（日志/错误浏览器增强）

## 需求背景

当前项目已具备本地日志、错误上报与诊断包导入/导出能力，但在 `/diagnostics` 页面内对「日志/错误」的查看仍偏“摘要化”（仅展示少量条目）。当需要排障、复盘、或对照导入的诊断包时，缺少以下行业常见能力会影响效率：

- 按关键词/来源快速检索
- 日志按级别筛选（debug/info/warn/error）
- 展开查看细节（stack/context）并便捷复制/下载
- 更顺手的导入体验（拖拽导入）

## 变更内容

1. 为 `/diagnostics` 增加“日志浏览器”与“错误浏览器”能力（筛选/检索/展开/导出）。
2. 增强“导入诊断包”交互：支持拖拽导入，并保持 local-first（不上传网络）。
3. 同步更新诊断文档与双语 README，补充上述能力的使用说明。

## 影响范围

- **模块:** Diagnostics 页面、UI 原子组件复用（TextField/SelectField 等）
- **文件:** `src/pages/DiagnosticsPage.jsx`、新增/调整若干组件与文档文件
- **API:** 无（纯前端本地能力）
- **数据:** 不新增持久化结构；仅在页面层进行筛选与展示

## 核心场景

### 需求: 日志浏览器（筛选/检索/导出）

**模块:** Diagnostics
提供按级别与关键词过滤日志的能力，支持展开查看 context/source 等信息，并可复制/下载筛选后的结果用于排障。

#### 场景: 现场排障快速定位

当用户反馈页面异常时，维护者可在 `/diagnostics` 直接筛选 `ERROR/WARN` 级别或按关键词查询，快速定位关键线索。

### 需求: 错误浏览器（展开 stack）

**模块:** Diagnostics
提供错误列表的检索与展开 stack 的能力，提升复盘效率。

#### 场景: 复盘某次崩溃

维护者可以查看最近错误并展开 stack，判断是否与某次路由切换、资源加载失败或脚本异常有关。

### 需求: 导入体验（拖拽导入）

**模块:** Diagnostics
在保持本地解析的前提下，提供拖拽导入入口，减少操作成本。

#### 场景: 对照排障

维护者导入用户提供的 `.json/.json.gz` 诊断包，与当前环境摘要对照，快速判断差异与趋势。

## 风险评估

- **风险:** 在页面内渲染过多日志可能影响性能
- **缓解:** 使用 `useMemo` 进行筛选缓存、限制一次渲染条目数、采用折叠细节展示
